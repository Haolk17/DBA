/* modelagem basica */

cliente

nome - caracter (30)
cpf - numerico (11)
email - caracter (30)
telefone - caracter (30)
endereço - caracter (100)
sexo - caracter (1)

/*processo de modelagem */
/* fase 01 e fase 02 - AD administrador de dados */
modelagem conceitual - rascunho
modelagem logica - passar para um programa de modelagem

/* fase 03 dba ou ad - scrpts de dados */
modelagem fisica - scripts de banco

/* iniciando a modelagem fisica */

CREATE DATABASE PROJETO;

CREATE DATABASE EXEMPLO ;
/* ENTRANDO NO DATABASE */

USE PROJETO;

/* CRIANDO TABELA */

CREATE TABLE CLIENTE(
	NOME VARCHAR(30),
	CPF INT(11),
	EMAIL VARCHAR(30),
	TELEFONE VARCHAR(30),
	ENDERECO VARCHAR(100),
	SEXO CHAR(1)

);

/*VERIFICANDO TABELAS DO BANCO */

SHOW TABLES;

/* DESCOBRINDO A ESTRUTURA DE UMA TABELA*/

DESC CLIENTE;

/*sintaxe basica de inserção */
insert into tabela ...

/* FORMA 01 - OMITINDO AS COLUNAS */

INSERT INTO CLIENTE VALUES('JOAO','M','JOAO@GMAIL.COM',988638273,'22923110','MAIA LACERDA - ESTACIO - RIO DE JANEIRO - RJ');

INSERT INTO CLIENTE VALUES('CELIA','F','CELIA@GMAIL.COM',541521456,'25078869','RIACHUELO - CENTRO - RIO DE JANEIRO - RJ');

INSERT INTO CLIENTE VALUES('JORGE','M',NULL,885755896,'58748895','OSCAR CURY - BOM RETIRO - PATOS DE MINAS - MG');

insert into cliente values('JOAO',988638273,'JOAO@GMAIL.COM','22923110','MAIA LACERDA - ESTACIO - RIO DE JANEIRO - RJ', 'M' );

INSERT INTO CLIENTE VALUES('CELIA',541521456,'CELIA@GMAIL.COM','25078869','RIACHUELO - CENTRO - RIO DE JANEIRO - RJ', 'F' );

INSERT INTO CLIENTE VALUES('JORGE',885755896,NULL,'58748895','OSCAR CURY - BOM RETIRO - PATOS DE MINAS - MG','M');


/* FORMA 02 - COLOCANDO AS COLUNAS */

INSERT INTO CLIENTE(NOME,SEXO,ENDERECO,TELEFONE,CPF) VALUES('LILIAN','F','SENADOR SOARES - TIJUCA - RIO DE JANEIRO - RJ','947785696',887774856);

/* FORMA 03 - INSERT COMPACTO - SOMENTE MYSQL */

INSERT INTO CLIENTE VALUES('ANA','F','ANA@GLOBO.COM',85548962,'548556985','PRES ANTONIO CARLOS - CENTRO - SAO PAULO - SP'),
                          ('CARLA','F','CARLA@TERATI.COM.BR',7745828,'66587458','SAMUEL SILVA - CENTRO - BELO HORIZONTE - MG');
						  
						  
INSERT INTO CLIENTE VALUES('ANA',85548962,'ANA@GLOBO.COM','548556985','PRES ANTONIO CARLOS - CENTRO - SAO PAULO - SP','F'),
('CARLA',7745828,'CARLA@TERATI.COM.BR','66587458','SAMUEL SILVA - CENTRO - BELO HORIZONTE - MG','F');

INSERT INTO CLIENTE(NOME,SEXO,ENDERECO,TELEFONE,CPF) VALUES('CLARA','F','SENADOR SOARES - TIJUCA - RIO DE JANEIRO - RJ','883665843',99999999999);

INSERT INTO CLIENTE(NOME,SEXO,ENDERECO,TELEFONE,CPF) VALUES('CLARA','F','SENADOR SOARES - TIJUCA - RIO DE JANEIRO - RJ','883665843',22222222222);

/*INT TEM RANGE PRE DEFINIDO E PODE NAO CHEGAR NO RANGE POR ISSO USAR VARCHAR OU CHAR PARA CPF E DADOS FIXO
UTILIZAR INT E FLOAT (FLOAT É NUMEROS REAIS), PARA DA NUMEROS QUE IRÃO SER CALCULADOS OU QUE PRECISEM SER UTILIZADOS EM FORMULAS MATEMATICA,
CASO O DADO SEJA DE UM VALOR FIXO (USAR VARCHAR) SE TIVER VALOR E TAMANHO FIXO (UTILIZAR CHAR)*/

/* O COMANDO SELECT 
selecao projecao e juncao - SELECT COSTUMA SER PARA PROJEÇÃO
*/

SELECT NOW() as DATA_HORA, 'FELIPE MAFRA' AS PROFESSOR;

SELECT 'FELIPE MAFRA';

SELECT 'BANCO DE DADOS';

/* ALIAS DE COLUNAS */


SELECT NOME AS CLIENTE, SEXO, EMAIL FROM CLIENTE;
/*PODEMOS INDICAR UM ALIAS DIRETO NO SELECT PARA APRESENTAÇÃO*/

SELECT NOME, SEXO, EMAIL, ENDERECO FROM CLIENTE;

SELECT   EMAIL, SEXO, ENDERECO, NOME FROM CLIENTE;

SELECT   EMAIL, SEXO, ENDERECO, NOME, NOW() AS DATA_HORA FROM CLIENTE;

/* APENAS PARA FINS ACADEMICOS */

SELECT * FROM CLIENTE;
/*SELEC * FROM CLIENTE - TRAZ TODOS OS DADOS DA TABELA, MAS QUANTO MAIS A TABELA MAIS DADOS SERAO EXIBIDOS*/

/* FILTRANDO DADOS COM WHERE E LIKE */
/*SELECIONAR AS COLUNAS É UM TIPO DE FILTRO POREM APENAS NAS COLUNAS*/

SELECT NOME, TELEFONE FROM CLIENTE;

/* FILTRANDO */
/*WHERE É O QUE EU QUERO DENTRO DO BANCO - SELECT NOME, ENDERECO FROM CLIENTE ONDE A COLUNA SEXO SEJA APENAS PREENCHIA POR 'F' - WHERE SEXO = 'F'*/

SELECT NOME, SEXO FROM CLIENTE
WHERE SEXO = 'M';

SELECT NOME, ENDERECO FROM CLIENTE
WHERE SEXO = 'F';

SELECT NOME, SEXO FROM CLIENTE
WHERE ENDERECO = 'RJ';
/* ESSE CAMPO NAO VAI RETORNAR VALOR POIS TERIA QUE TRAZER APENAS OS QUE TEM APENAS RJ E NAO APROXIMADO*/
/*PARA ISSO UTILZIAR O LIKE*/
/* UTILIZANDO O LIKE */

SELECT NOME, SEXO FROM CLIENTE
WHERE ENDERECO LIKE 'RJ';
/*LIKE UTILIZA CARACTER CURINGA PARA IDENTIFICAR ALGO DENTRO DA LINHA*/
/* CARACTER CORINGA % -> QUALQUER COISA */
/*ONDE É COLOCADO O CORINGA REPRESENTA QUE TEM ALGO ANTES, DEPOIS OU ANTES E DEPOIS, INDICANDO QUE O VALOR 
PROCURADO ESTA ENTRA DUAS INFORMAÇÕES*/

SELECT NOME, SEXO FROM CLIENTE
WHERE ENDERECO LIKE '%RJ';

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE ENDERECO LIKE '%RJ';

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE ENDERECO LIKE 'OSCAR CURY%';

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE ENDERECO LIKE '%CENTRO%';

/*DESAFIO LIVRARIA*/

CREATE DATABASE LIVRARIA;

USE LIVRARIA;

CREATE TABLE LIVROS(
	NOME_DO_LIVRO VARCHAR(30),
	NOME_DO_AUTOR VARCHAR(30),
	SEXO_AUTOR CHAR(1),
	NUMERO_DE_PAGINAS VARCHAR(4),
	NOME_EDITORA VARCHAR(20),
	VALOR FLOAT(6,2),
	UF_EDITORA CHAR(2),
	ANO_PUBLICACAO CHAR(4)
	);

/*TABELA E DATABASE CRIADOS*/

INSERT INTO LIVROS VALUES('Cavaleiro Real','Ana Claudia','F',465,'Atlas',49.9,'RJ',2009);
INSERT INTO LIVROS VALUES('SQL para leigos','João Nunes','M',450,'Addison',98,'SP',2018);
INSERT INTO LIVROS VALUES('Receitas Caseiras','Celia Tavares','F',210,'Atlas',45,'RJ',2008);
INSERT INTO LIVROS VALUES('Pessoas Efetivas','Eduardo Santos','M',390,'Beta',78,'RJ',2018);
INSERT INTO LIVROS VALUES('Habitos Saudáveis','Eduardo Santos','M',630,'Beta',150,'RJ',2019);
INSERT INTO LIVROS VALUES('A Casa Marrom','Hermes Macedo','M',250,'Bubba',60,'MG',2016);
INSERT INTO LIVROS VALUES('Estacio Querido','Geraldo Francisco','M',310,'Insignia',100,'ES',2015);
INSERT INTO LIVROS VALUES('Pra sempre amigas','Leda Silva','F',510,'Insignia',78,'ES',2011);
INSERT INTO LIVROS VALUES('Copas Inesqueciveis','Marco Alcantara','M',200,'Larson',130,'RS',2018);
INSERT INTO LIVROS VALUES('O poder da mente','Clara Mafra','F',120,'Continental',56,'SP',2017);

/*CRIAR QUERYS*/

/*1 QUERY*/

SELECT * FROM LIVROS;

/* 2 QUERY */
SELECT NOME_DO_LIVRO, NOME_EDITORA FROM LIVROS;

/*3 QUERY*/
SELECT NOME_DO_LIVRO, UF_EDITORA FROM LIVROS
WHERE SEXO_AUTOR = 'M';

/*4 QUERY */
SELECT NOME_DO_LIVRO, NUMERO_DE_PAGINAS FROM LIVROS
WHERE SEXO_AUTOR = 'F';

/*5 QUERY */
SELECT VALOR FROM LIVROS
WHERE UF_EDITORA = 'SP';

/*6 QUERY DESAFIO */

SELECT NOME_DO_AUTOR, SEXO_AUTOR FROM LIVROS
WHERE SEXO_AUTOR = 'M' AND (UF_EDITORA = 'SP' OR UF_EDITORA = 'RJ');


/* OPERADORES LÓGICOS 
OR -> PARA QUE A SAIDA DA QUERY SEJA VERDADEIRA, BASTA QUE APENAS UMA CONDICAO SEJA VERDADEIRA.
AND -> PARA QUE A SAIDA SEJA VERDADEIRA TODAS AS CONDICOES PRECISAM SER VERDADEIRAS.
*/

/* OR - OU */

SHOW DATABASES;

USE PROJETO;

SELECT * FROM CLIENTE;

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE 
SEXO = 'M' OR ENDERECO LIKE '%RJ';

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE 
SEXO = 'M' AND ENDERECO LIKE '%RJ';

SELECT NOME, SEXO, ENDERECO  FROM CLIENTE
WHERE
SEXO = 'F' OR ENDERECO LIKE '%ESTACIO';

/* AND - E */

SELECT NOME, SEXO, ENDERECO  FROM CLIENTE
WHERE 
SEXO = 'M' AND ENDERECO LIKE '%RJ';

SELECT NOME, SEXO, ENDERECO FROM CLIENTE
WHERE
SEXO = 'F' AND ENDERECO LIKE '%ESTACIO';

/* COUNT(*), GROUP BY, PERFORMANCE COM OPERADORES
LOGICOS */

/* CONTANDO OS REGISTROS DE UMA TABELA */

SELECT COUNT(*) AS "Quantidade de Registros da Tab. Cliente"
 FROM CLIENTE;

/* OPERADOR GROUP BY */

SELECT SEXO, COUNT(*)
FROM CLIENTE;

SELECT * FROM CLIENTE;

SELECT SEXO, COUNT(*) 
FROM CLIENTE
GROUP BY SEXO;


/* exercicio */

/* Considerando o que vc aprendeu sobre performance, resolva os exercicios abaixo */

--Traga os funcionarios que trabalhem
--no departamento de filmes OU no
--departamento de roupas
select departamento, count(*) from funcionarios
group by departamento
order by 1;
--order by ordena pela coluna especificada

select * from funcionarios
where departamento = 'roupas' or departamento = 'filmes';


--O gestor de marketing pediu a lista das funcionarias (AS) = FEMININO que trabalhem no departamento 
--de filmes ou no departamento lar. Ele necessita enviar um email para as colaboradoras desses dois setores.
select sexo, count(*) from funcionarios
group by sexo;

select * from funcionarios
where (departamento = 'lar'or departamento = 'filmes') and sexo = 'Feminino';


--Traga os funcionarios do sexo masculino
--ou os funcionarios que trabalhem no setor Jardim
select * from funcionarios
where sexo = 'Masculino' or departamento = 'jardim';



create table funcionarios(
      idFuncionario integer,
      nome varchar(100),
      email varchar(200),
      sexo varchar(10),
      departamento varchar(100),
      admissao varchar(10),
      salario integer,
      cargo varchar(100),
      idRegiao int
  );

/* FILTRANDO VALORES NULOS */

SELECT NOME, SEXO, ENDERECO
FROM CLIENTE
WHERE sexo = 'F';

SELECT NOME, SEXO, ENDERECO
FROM CLIENTE
WHERE EMAIL = NULL;

SELECT NOME, SEXO, ENDERECO
FROM CLIENTE
WHERE EMAIL IS NULL;

SELECT NOME, SEXO, ENDERECO
FROM CLIENTE
WHERE EMAIL IS NOT NULL;

/* IS OU IS NOT NULL */

/* UTILIZANDO O UPDATE PARA ATUALIZAR VALORES */

SELECT NOME, EMAIL
FROM CLIENTE;

UPDATE CLIENTE
SET EMAIL = 'LILIAN@HOTMAIL.COM';

SELECT NOME, EMAIL
FROM CLIENTE;

/* WHERE - VAI SER O SEU MELHOR AMIGO DA VIDA
PRA VIDA INTEIRA */


SELECT * FROM CLIENTE
WHERE NOME = 'LILIAN';

UPDATE CLIENTE
SET EMAIL = 'JOAOA@IG.COM.BR'
WHERE NOME = 'JOAO';

SELECT NOME, EMAIL
FROM CLIENTE;

UPDATE CLIENTE
SET EMAIL = 'JORGE@IG.COM.BR'
WHERE NOME = 'JORGE';

SELECT NOME, EMAIL
FROM CLIENTE;

/* DELETANDO REGISTROS COM A CLAUSULA DELETE */

DELETE FROM CLIENTE; 

SELECT * FROM CLIENTE WHERE NOME = 'ANA';

SELECT COUNT(*) FROM CLIENTE; -- TOTAL 6

SELECT COUNT(*) FROM CLIENTE -- TOTAL DELETADO 1
WHERE NOME = 'ANA';

DELETE FROM CLIENTE
WHERE NOME = 'ANA';

SELECT COUNT(*) FROM CLIENTE; -- RESTANTE 5

SELECT 6 - 1;

SELECT * FROM CLIENTE;

INSERT INTO CLIENTE VALUES('CARLA',45638854,'C.LOPES@UOL.COM','4575-0048','RUA COPPER LEAF - WILLIAMSBURG - KITCHENER','f'
);
,
SELECT * FROM CLIENTE;

DELETE FROM CLIENTE
WHERE NOME = 'CARLA'
OR EMAIL = 'LILIAN@HOTMAIL.COM';

SELECT * FROM CLIENTE
WHERE NOME = 'CARLA'
OR EMAIL = 'LILIAN@HOTMAIL.COM';

SELECT * FROM CLIENTE -- OR TRAZ TODO MUNDO COM PELO MENOS UMA DAS DUAS CONDICOES
WHERE NOME = 'CARLA'
AND EMAIL = 'LILIAN@HOTMAIL.COM';

DELETE FROM CLIENTE -- TRAZ APENAS O REGISTRO QUE SATISFACA AS DUAS CONDICOES
WHERE NOME = 'CARLA'
AND EMAIL = 'CARLA@TERATI.COM.BR';

update cliente
set email = 'lilian@ig.com.br'
where nome = 'lilian';

